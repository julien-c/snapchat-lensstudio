# [Lens Studio](/)

  - [Lens Studio](/)
  - [Snap Camera](/snap-camera)
  - [Creators](/creators)
  - [Lenses](/lenses)
  - [News](/news)
  - [Reference](#)
      - [Templates](/templates)
      - [Guides](/guides)
      - [API](/api)
      - [FAQ](/support)
      - [Forum](https://support.lensstudio.com/hc/en-us/community/topics)

[Download](/download)

[](#) [](#)

This site requires JavaScript to be enabled for proper functionality.

  - Classes
      - [AnimatedTextureFileProvider](/api/classes/AnimatedTextureFileProvider)
      - [Animation](/api/classes/Animation)
      - [AnimationClip.PostInfinity](/api/classes/AnimationClip_PostInfinity)
      - [AnimationClip.RangeType](/api/classes/AnimationClip_RangeType)
      - [AnimationLayer](/api/classes/AnimationLayer)
      - [AnimationMixer](/api/classes/AnimationMixer)
      - [AnimationMixerLayer](/api/classes/AnimationMixerLayer)
      - [AnimationTrack](/api/classes/AnimationTrack)
      - [Asset](/api/classes/Asset)
      - [AttachmentPointType](/api/classes/AttachmentPointType)
      - [AudioComponent](/api/classes/AudioComponent)
      - [AudioEffectAsset](/api/classes/AudioEffectAsset)
      - [AudioEffectComponent](/api/classes/AudioEffectComponent)
      - [AudioEffectProvider](/api/classes/AudioEffectProvider)
      - [AudioTrackAsset](/api/classes/AudioTrackAsset)
      - [BinAsset](/api/classes/BinAsset)
      - [BlendShapesVisual](/api/classes/BlendShapesVisual)
      - [BrowsLoweredEvent](/api/classes/BrowsLoweredEvent)
      - [BrowsRaisedEvent](/api/classes/BrowsRaisedEvent)
      - [BrowsReturnedToNormalEvent](/api/classes/BrowsReturnedToNormalEvent)
      - [Camera](/api/classes/Camera)
      - [Camera.DepthBufferMode](/api/classes/Camera_DepthBufferMode)
      - [Camera.DeviceProperty](/api/classes/Camera_DeviceProperty)
      - [Camera.Type](/api/classes/Camera_Type)
      - [CameraBackEvent](/api/classes/CameraBackEvent)
      - [CameraFrontEvent](/api/classes/CameraFrontEvent)
      - [ClearDepth](/api/classes/ClearDepth)
      - [Component](/api/classes/Component)
      - [CullMode](/api/classes/CullMode)
      - [DelayedCallbackEvent](/api/classes/DelayedCallbackEvent)
      - [DeviceLocationTrackingComponent](/api/classes/DeviceLocationTrackingComponent)
      - [DeviceTracking](/api/classes/DeviceTracking)
      - [DeviceTrackingMode](/api/classes/DeviceTrackingMode)
      - [DropshadowSettings](/api/classes/DropshadowSettings)
      - [EyeColorVisual](/api/classes/EyeColorVisual)
      - [FaceFoundEvent](/api/classes/FaceFoundEvent)
      - [FaceImagePickerTextureProvider](/api/classes/FaceImagePickerTextureProvider)
      - [FaceInsetRegion](/api/classes/FaceInsetRegion)
      - [FaceInsetVisual](/api/classes/FaceInsetVisual)
      - [FaceLostEvent](/api/classes/FaceLostEvent)
      - [FaceMaskVisual](/api/classes/FaceMaskVisual)
      - [FaceStretchVisual](/api/classes/FaceStretchVisual)
      - [FaceTextureProvider](/api/classes/FaceTextureProvider)
      - [FaceTrackingEvent](/api/classes/FaceTrackingEvent)
      - [FileTextureProvider](/api/classes/FileTextureProvider)
      - [FloatAnimationTrack](/api/classes/FloatAnimationTrack)
      - [FloatAnimationTrackKeyFramed](/api/classes/FloatAnimationTrackKeyFramed)
      - [FloatBezierAnimationTrackKeyFramed](/api/classes/FloatBezierAnimationTrackKeyFramed)
      - [Font](/api/classes/Font)
      - [GeneralDataStore](/api/classes/GeneralDataStore)
      - [Gyroscope](/api/classes/Gyroscope)
      - [Head](/api/classes/Head)
      - [HintsComponent](/api/classes/HintsComponent)
      - [HorizontalOverflow](/api/classes/HorizontalOverflow)
      - [IEventParameters](/api/classes/IEventParameters)
      - [Image](/api/classes/Image)
      - [ImagePickerTextureProvider](/api/classes/ImagePickerTextureProvider)
      - [IntAnimationTrack](/api/classes/IntAnimationTrack)
      - [IntStepAnimationTrackKeyFramed](/api/classes/IntStepAnimationTrackKeyFramed)
      - [IntStepNoLerpAnimationTrackKeyFramed](/api/classes/IntStepNoLerpAnimationTrackKeyFramed)
      - [KissFinishedEvent](/api/classes/KissFinishedEvent)
      - [KissStartedEvent](/api/classes/KissStartedEvent)
      - [Label](/api/classes/Label)
      - [LateUpdateEvent](/api/classes/LateUpdateEvent)
      - [LayerSet](/api/classes/LayerSet)
      - [LightSource](/api/classes/LightSource)
      - [LiquifyVisual](/api/classes/LiquifyVisual)
      - [LocalizationSystem](/api/classes/LocalizationSystem)
      - [LocationProximityStatus](/api/classes/LocationProximityStatus)
      - [LookAtComponent](/api/classes/LookAtComponent)
      - [LookAtComponent.AimVectors](/api/classes/LookAtComponent_AimVectors)
      - [LookAtComponent.WorldUpVector](/api/classes/LookAtComponent_WorldUpVector)
      - [ManipulateComponent](/api/classes/ManipulateComponent)
      - [ManipulateEndEvent](/api/classes/ManipulateEndEvent)
      - [ManipulateFrameIntersectResult](/api/classes/ManipulateFrameIntersectResult)
      - [ManipulateStartEvent](/api/classes/ManipulateStartEvent)
      - [ManipulateType](/api/classes/ManipulateType)
      - [MarkerAsset](/api/classes/MarkerAsset)
      - [MarkerProvider](/api/classes/MarkerProvider)
      - [MarkerTrackingComponent](/api/classes/MarkerTrackingComponent)
      - [mat2](/api/classes/mat2)
      - [mat3](/api/classes/mat3)
      - [mat4](/api/classes/mat4)
      - [Material](/api/classes/Material)
      - [MeshBuilder](/api/classes/MeshBuilder)
      - [MeshIndexType](/api/classes/MeshIndexType)
      - [MeshTopology](/api/classes/MeshTopology)
      - [MeshVisual](/api/classes/MeshVisual)
      - [MouthClosedEvent](/api/classes/MouthClosedEvent)
      - [MouthOpenedEvent](/api/classes/MouthOpenedEvent)
      - [ObjectPrefab](/api/classes/ObjectPrefab)
      - [ObjectTracking](/api/classes/ObjectTracking)
      - [OutlineSettings](/api/classes/OutlineSettings)
      - [Pass](/api/classes/Pass)
      - [PersistentStorageSystem](/api/classes/PersistentStorageSystem)
      - [PinToMeshComponent](/api/classes/PinToMeshComponent)
      - [PinToMeshComponent.Orientation](/api/classes/PinToMeshComponent_Orientation)
      - [PostEffectVisual](/api/classes/PostEffectVisual)
      - [ProceduralMeshRenderObjectProvider](/api/classes/ProceduralMeshRenderObjectProvider)
      - [quat](/api/classes/quat)
      - [QuaternionAnimationTrack](/api/classes/QuaternionAnimationTrack)
      - [QuaternionAnimationTrackKeyFramed](/api/classes/QuaternionAnimationTrackKeyFramed)
      - [QuaternionAnimationTrackXYZEuler](/api/classes/QuaternionAnimationTrackXYZEuler)
      - [Rect](/api/classes/Rect)
      - [RenderMesh](/api/classes/RenderMesh)
      - [RenderObjectProvider](/api/classes/RenderObjectProvider)
      - [RenderTargetProvider](/api/classes/RenderTargetProvider)
      - [Resource](/api/classes/Resource)
      - [RetouchVisual](/api/classes/RetouchVisual)
      - [RotationOptions](/api/classes/RotationOptions)
      - [SceneEvent](/api/classes/SceneEvent)
      - [SceneObject](/api/classes/SceneObject)
      - [SceneObjectEvent](/api/classes/SceneObjectEvent)
      - [ScreenRegionComponent](/api/classes/ScreenRegionComponent)
      - [ScreenRegionType](/api/classes/ScreenRegionType)
      - [ScreenTransform](/api/classes/ScreenTransform)
      - [ScriptComponent](/api/classes/ScriptComponent)
      - [ScriptObject](/api/classes/ScriptObject)
      - [ScriptScene](/api/classes/ScriptScene)
      - [SegmentationModel](/api/classes/SegmentationModel)
      - [SegmentationTextureProvider](/api/classes/SegmentationTextureProvider)
      - [SerializableWithUID](/api/classes/SerializableWithUID)
      - [Skin](/api/classes/Skin)
      - [SmileFinishedEvent](/api/classes/SmileFinishedEvent)
      - [SmileStartedEvent](/api/classes/SmileStartedEvent)
      - [SnapcodeMarkerProvider](/api/classes/SnapcodeMarkerProvider)
      - [SpriteAligner](/api/classes/SpriteAligner)
      - [SpriteVisual](/api/classes/SpriteVisual)
      - [StretchMode](/api/classes/StretchMode)
      - [SurfaceOptions](/api/classes/SurfaceOptions)
      - [SurfaceTrackingResetEvent](/api/classes/SurfaceTrackingResetEvent)
      - [TapEvent](/api/classes/TapEvent)
      - [Text](/api/classes/Text)
      - [TextFill](/api/classes/TextFill)
      - [TextFillMode](/api/classes/TextFillMode)
      - [TextProvider](/api/classes/TextProvider)
      - [Texture](/api/classes/Texture)
      - [TextureProvider](/api/classes/TextureProvider)
      - [TouchComponent](/api/classes/TouchComponent)
      - [TouchDataProvider](/api/classes/TouchDataProvider)
      - [TouchEndEvent](/api/classes/TouchEndEvent)
      - [TouchMoveEvent](/api/classes/TouchMoveEvent)
      - [TouchStartEvent](/api/classes/TouchStartEvent)
      - [Transform](/api/classes/Transform)
      - [TurnOffEvent](/api/classes/TurnOffEvent)
      - [TurnOnEvent](/api/classes/TurnOnEvent)
      - [UpdateEvent](/api/classes/UpdateEvent)
      - [UserContextSystem](/api/classes/UserContextSystem)
      - [vec2](/api/classes/vec2)
      - [Vec2AnimationTrack](/api/classes/Vec2AnimationTrack)
      - [Vec2AnimationTrackKeyFramed](/api/classes/Vec2AnimationTrackKeyFramed)
      - [vec3](/api/classes/vec3)
      - [Vec3AnimationTrack](/api/classes/Vec3AnimationTrack)
      - [Vec3AnimationTrackKeyFramed](/api/classes/Vec3AnimationTrackKeyFramed)
      - [Vec3AnimationTrackXYZ](/api/classes/Vec3AnimationTrackXYZ)
      - [vec4](/api/classes/vec4)
      - [Vec4AnimationTrack](/api/classes/Vec4AnimationTrack)
      - [Vec4AnimationTrackKeyFramed](/api/classes/Vec4AnimationTrackKeyFramed)
      - [vec4b](/api/classes/vec4b)
      - [VertexCache](/api/classes/VertexCache)
      - [VerticalOverflow](/api/classes/VerticalOverflow)
      - [VideoStatus](/api/classes/VideoStatus)
      - [VideoTextureProvider](/api/classes/VideoTextureProvider)
      - [Visual](/api/classes/Visual)
      - [WeatherCondition](/api/classes/WeatherCondition)
  - [Assets](/api/Assets)
  - [Components](/api/Components)
  - [Events](/api/Events)
  - [Global Methods](/api/GlobalMethods)
  - [Global Properties](/api/GlobalProperties)
  - [Scripting Input Types](/api/InputTypes)
  - [Shader Properties](/api/ShaderProperties)

<!-- end list -->

  - [API](/api)
  - [Classes](/api/classes)
  - MeshBuilder

# MeshBuilder

Lens Studio **v1.0.0+**

## Description

A class for generating meshes at runtime.

## Constructor

-----

### `new MeshBuilder(object[] layout)` : [`MeshBuilder`](/api/classes/MeshBuilder)

Creates a new MeshBuilder with the specified vertex layout.

Layout is given as a list of “attribute” objects with the following
properties:

  - **name** - Attribute name
  - **components** - Size of the attribute (how many float values it
    uses)
  - **normalized** (optional) - Optional property declaring that the
    attribute should be normalized

<!-- end list -->

    var builder = new MeshBuilder([
        // vertex position (x,y,z)
        { name: "position", components: 3 },
        // normal vector (x,y,z)
        { name: "normal", components: 3, normalized: true },
        // texture UV (u,v)
        { name: "texture0", components: 2 },
    ]);

## Methods

-----

### `appendIndices(Number[] indices)` : `void`

Appends indices to the index list.

-----

### `appendVertices(Number[][] verts)` : `void`

Takes a list of list of vertex values according to the layout.

-----

### `appendVerticesInterleaved(Number[] verts)` : `void`

Similar to `appendVertices`, but takes all values in one large array.

-----

### `eraseIndices(Number from, Number to)` : `void`

Removes all indices starting at index `from` and ending before index
`to`.

-----

### `eraseVertices(Number from, Number to)` : `void`

Removes all vertex data starting at vertex index `from` and ending
before vertex index `to`.

-----

### `getIndicesCount()` : `Number`

Returns the number of indices in the index list.

-----

### `getMesh()` : [`RenderMesh`](/api/classes/RenderMesh)

Returns a RenderMesh asset that can be applied to a MeshVisual’s `mesh`
property. This asset stays linked to the MeshBuilder that provided it,
so making changes to the mesh data and calling `updateMesh()` will
update the RenderMesh as well.

-----

### `getVerticesCount()` : `Number`

Returns the number of vertices in the vertex list.

-----

### `isValid()` : `Boolean`

Checks whether the current data entered will create a valid mesh.

-----

### `setVertexInterleaved(Number index, Number[] verts)` : `void`

Sets data for a single vertex at vertex index `index`.

-----

### `updateMesh()` : `void`

Rebuilds the MeshAsset controlled by this MeshBuilder using the current
mesh data.

## Properties

-----

### `indexType` : [`MeshIndexType`](/api/classes/MeshIndexType)

The index data type used by this MeshBuilder. `MeshIndexType.UInt16` is
the value normally used for this.

-----

### `topology` : [`MeshTopology`](/api/classes/MeshTopology)

The topology type used for the mesh.

## Examples

### Quad Mesh Example

    // Builds a quad mesh and applies it to meshVisual
    //@input Component.MeshVisual meshVisual
    
    var builder = new MeshBuilder([
        { name: "position", components: 3 },
        { name: "normal", components: 3, normalized: true },
        { name: "texture0", components: 2 },
    ]);
    
    builder.topology = MeshTopology.Triangles;
    builder.indexType = MeshIndexType.UInt16;
    
    var left = -.5;
    var right = .5;
    var top = .5;
    var bottom = -.5;
    
    builder.appendVerticesInterleaved([
        // Position         Normal      UV       Index
        left, top, 0,       0, 0, 1,    0, 1,    // 0
        left, bottom, 0,    0, 0, 1,    0, 0,    // 1
        right, bottom, 0,   0, 0, 1,    1, 0,    // 2
        right, top, 0,      0, 0, 1,    1, 1,    // 3
    ]);
    
    builder.appendIndices([
        0,1,2, // First Triangle
        2,3,0, // Second Triangle
    ]);
    
    if(builder.isValid()){
        script.meshVisual.mesh = builder.getMesh();
        builder.updateMesh();
    }
    else{
        print("Mesh data invalid!");
    }

### Cube Mesh Example

    // Builds a cube mesh and applies it to meshVisual
    //@input Component.MeshVisual meshVisual
    //@input vec3 center = {0,0,0}
    //@input vec3 size = {4,4,4}
    
    var builder = new MeshBuilder([
        { name: "position", components: 3 },
        { name: "normal", components: 3, normalized: true },
        { name: "texture0", components: 2 },
    ]);
    
    builder.topology = MeshTopology.Triangles;
    builder.indexType = MeshIndexType.UInt16;
    
    var halfSize = script.size.uniformScale(.5);
    var right =  script.center.x + halfSize.x;
    var left =   script.center.x - halfSize.x;
    var top =    script.center.y + halfSize.y;
    var bottom = script.center.y - halfSize.y;
    var front =  script.center.z + halfSize.z;
    var back =   script.center.z - halfSize.z;
    
    // UVs of quad in order: Top left, Bottom left, Bottom right, Top right
    const QUAD_UVS = [[0,1], [0,0], [1,0], [1,1]];
    
    // Append data for 4 vertices in a quad shape
    function addQuadVerts(meshBuilder, normal, positions){
        for(var i=0; i<positions.length; i++){
            meshBuilder.appendVertices([positions[i], normal, QUAD_UVS[i]]);
        }
    }
    
    // Append the indices for two triangles, forming a quad
    function addQuadIndices(meshBuilder, topLeft, bottomLeft, bottomRight, topRight){
        meshBuilder.appendIndices([
            topLeft, bottomLeft, bottomRight, // First Triangle
            bottomRight, topRight, topLeft // Second Triangle
        ]);
    }
    
    // Define the normal direction and vertex positions for each side of the cube
    var sides = [
        { normal: [0,0,1], // Front
          positions: [[left,top,front], [left,bottom,front], [right,bottom,front], [right,top,front]] },
        { normal: [0,0,-1], // Back
          positions: [[right,top,back], [right,bottom,back], [left,bottom,back], [left,top,back]] },
        { normal: [1,0,0], // Right
          positions: [[right,top,front], [right,bottom,front], [right,bottom,back], [right,top,back]] },
        { normal: [-1,0,0], // Left
          positions: [[left,top,back], [left,bottom,back], [left,bottom,front], [left,top,front]] },
        { normal: [0,1,0], // Top
          positions: [[left,top,back], [left,top,front], [right,top,front], [right,top,back]] },
        { normal: [0,-1,0], // Bottom
          positions: [[left,bottom,front], [left,bottom,back], [right,bottom,back], [right,bottom,front]] },
    ];
    
    // For each side, append the vertex data and indices
    for(var i=0; i<sides.length; i++){
        var index = i * 4;
        addQuadVerts(builder, sides[i].normal, sides[i].positions);
        addQuadIndices(builder, index, index+1, index+2, index+3);
    }
    
    // Make sure the mesh is valid, then apply and update
    if(builder.isValid()){
        script.meshVisual.mesh = builder.getMesh();
        builder.updateMesh();
    }
    else{
        print("Mesh data invalid!");
    }

Still Looking for help?

[Visit Support](/support)

Company

[Snap Inc.](https://www.snap.com/) [Jobs](https://www.snap.com/jobs/)
[News](https://www.snap.com/news/)

Community

[Support](https://support.snapchat.com/) [Community
Guidelines](https://support.snapchat.com/a/guidelines) [Safety
Center](https://www.snapchat.com/safety)

Advertising

[Buy Ads](https://www.snapchat.com/ads) [Advertising
Policies](https://www.snap.com/ad-policies/) [Brand
Guidelines](https://www.snap.com/brand-guidelines/) [Promotions
Rules](https://support.snapchat.com/a/promotions-rules)

Legal

[Privacy Center](https://www.snap.com/privacy/privacy-center/) [Cookie
Policy](https://www.snap.com/cookie-policy/)
[Copyright](https://support.snapchat.com/co/report-copyright) [Custom
Creative Tool
Terms](https://www.snap.com/en-US/terms/custom-creative-tools/)
[Community Geofilter Terms](https://www.snapchat.com/create/terms.html)
[Lens Studio Terms](https://www.snap.com/terms/lens-studio-terms/)

[Privacy Policy](https://www.snap.com/privacy/privacy-policy/) [Terms of
Service](https://www.snap.com/terms/)

Hi\! We use cookies on this website to help operate our site and for
analytics and advertising purposes. For more on how we use cookies and
your cookie choices, go [here](https://www.snap.com/cookie-policy/)\! By
continuing to use our services, you are giving us your consent to use
cookies.
